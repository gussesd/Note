## 计算机硬件
* 基本构成分为:  #运算器 , #控制器 , #存储器 , #输入设备 , #输出设备
	* 运算器 , 控制器 合在一起叫中央处单元 (CPU) , 数据的加工处理, 完成各种算术,逻辑运算以及控制
	* 存储器 , 记忆设备, 分*内部存储器和外部存储器*  前者(RAM/ROM)速度快后者速度慢
	* 输入设备和输出设备统称为外部设备 #外设 用于原始数据各种命令, 和输出运行结果.

### 中央处理单元
* CPU的功能
	1. 程序控制 : 通过指令控制程序的执行顺序 (重要功能)
	2. 操作控制 : Cpu将每个指令的操作信号传递到对应对的部件,并控制相应的部件按指令进行操作.
	3. 时间控制 : CPU 对各种操作和任务进行时间安排和管理
	4. 数据处理 : 对数据运算和逻辑处理 (最根本的任务)
	5. 对系统内部和外部的中断(异常)做出响应,并进行处理
* CPU的组成
	* #运算器, #控制器, #寄存器, #内部总线 组成
	1. #运算器 由 #算术逻辑单元 #ALU , #累加寄存器 #AC , #数据缓冲寄存器 #DR, #状态条件寄存器 #PSW 组成
		1.  算术逻辑单元 : 对数据的算术和逻辑处理
		2.  累加寄存器 : 存放源操作数和运算结果
		3.  数据缓冲寄存器 : 存放内存的指令或数据
	 	4.  状态条件寄存器 : 存放运算结果的条件码内容, 溢出标志等
		* 执行所有算术运算(加减乘除)和逻辑测试(与或非比较等) 
	2. #控制器 由 #指令寄存器 #IR #程序计数寄存器 #PC #地址寄存器 #AR #指令译码寄存器 #ID 组成
		* 程序计数寄存器 找到地址, 取出指令存放至 指令寄存器, 由 指令译码寄存器 翻译指令
		1.  指令寄存器 : 存放CPU指令
		2.  程序计数寄存器 : 存放指令执行地址
		3.  地址寄存器 : 存放当前CPU所访问的内存地址
		4.  指令译码器 : 分析指令操作码
		*  控制整个CPU工作,最为重要
	* CPU根据指令周期的不同阶段分为二进制的指令和数据 (先取指令, 后运算数据)

### 校验码
1.  #码距 指一个编码到另一个编码最小所需要变的位数
	* 奇校验/偶校验 (末尾加1使编码中的1的个数变为奇数/偶数 同时码距变为2) 无法纠错
2. 循环冗余校验 #CRC 
	* 只能检错, 不能纠错. 约定一个多项式G(x)再原数据后追加若干位,使其能被多项式G(x)整除, 接收方收到消息后用G(x)整除余数为0 则正确
	*  若余数不足多项式的位数,则在左边补0  (4位下: 11 => 0011)
	* CRC-n = f(x) = x^n + x^n-1 ... +1, *其中除数是(n+1)位, 余数(答案) 是 n 位*
3. #海明码 比较复杂 [海明码](https://zhuanlan.zhihu.com/p/660476895)
### 指令系统

1. 计算机指令由 #操作码 和 #操作数 组成
	* 操作码 决定要完成的操作
	* 操作数 参加运算的数据及其所在的单元地址
2. 计算机执行指令过程 取指令-> 分析指令 -> 执行指令
3. 寻址方式
	1. 指令的寻址方式
		* #顺序寻址方式 执行下一段程序时, 一条接一条顺序执行的.
		* #跳跃寻址方式 执行下一条指令不是有程序计数器(PC)给出,而是本条指令直接给出. 执行时程序计数器也会相应改变,以追踪后续指令
	2. 操作数的寻址方式
		*  #立即寻址方式 不是给出地址 , 而是操作数本身.
		*  #直接寻址方式 直接给出操作数在主存的地址
		*  #间接寻址方式 指令地址码指向的存储单元中存储的操作数的地址本身 (给出的是地址的地址)
		*   #寄存器寻址方式 地址码是寄存器编号
		*   #基址寻址方式 将基址寄存器的内容加上偏移量,共同计算出实际物理地址, 优点是扩大了寻址能力
		*   #变址寻址方式 通过变址寄存器与指令中的基地址相加算出物理地址(数组,字符串)
4. 指令集
	*  #复杂指令集计算机 #CISC 兼容性强,指令多,长度可变,由微程序实现
	*   #精简指令集计算机 #RISC 指令少,使用频率接近,主要靠寄存器实现(寄存器,硬布线逻辑控制)

| 指令系统类型 | 指令 | 寻址方式 | 实现方式 | 其他 |
| ------------ | ---- | -------- | -------- | ---- |
|  复杂指令集计算机 CISC |  数量多,使用频率差别大,可变长格式 | 支持多种 | 微程序控制技术 | 研制周期长 |
|  精简指令集计算机 RISC | 数量少,使用频率接近,大部分为单周期指令 | 支持方式少 | 增加通用寄存器,硬布线逻辑控制为主 | 优化编译,有效支持高级语言 |

5. 指令流水线
	* 将指令分成不同段, 每段由不同的部分去处理
	1. 超流水线技术 :  提高主频使周期内完成多个操作, 本质是 以时间换取空间
	2. 超标量技术 : 通过多个流水线同时执行多个处理,使其拥有更小的(CPI 每条指令的周期数) 本质是用空间换时间
	3. 超长指令字技术 : 将多条独立指令打包,无需硬件动态调度,直接并行执行 充分发挥软件的作用,简化硬件,提高性能
6. 流水线的计算
	* 流水线周期 : 指令分为不同阶段, 其中执行最长的段为流水线周期
	* 流水线执行时间 :  一条指令总执行时间 + (总指令条数 - 1) * 流水线周期 
		* 第一条需要完整执行时间,后续执行只会需要 取值,分析,执行中的某个最大值即可
	* 流水线吞吐率计算 : 单位时间内执行的指令条数   (指令条数/流水线执行时间)
	* 流水线的加速比计算 : 不使用流水线执行时间/使用流水线执行时间

### 存储系统
1. 局部性原理 : 在CPU 运行时,所访问的数据会趋向于一个较小的局部空间
	* 时间局部性原理 : 如果一个数据正在被访问, 那么他有可能会被再次访问, 即 #相邻的时间里会访问同一个数据项
	* 空间局部性原理 : 在最近的将来会用到的数据和地址和现在用的的数据和地址可能是相近的,即 #相邻的空间地址会被连续访问
	* 
2. Cache : 用来存储当前最活跃的程序个数据,直接与CPU交互,位于CPU和主存之间.
	* Cache 由控制器和存储器组成
	* 地址映射 :  CPU工作时,送出的是主存单元的地址 (CPU请求的是内存地址), 从Cache中读写信息,需要将主存转化为Cache存储器地址. *由硬件自动完成映射*
		1. 直接相联映射 : 将 Cache 存储器分成块, 主存等分成区和块,二者块号相同才能命中
		2. 组组相联映射 : 两种方式的结合, 主存组号与cache中的组号相同才能命中,但是组内所有块任意调换.
		3. 全相联映射 : 主存任意一块都与Cache中任意一块对应,不易发生块冲突映像
	* 替换算法 : 使Cache尽可能命中
		* 随机替换算法 : 随机替换
		* 先进先出替换算法 : 将最早进入的Cache块替换出去
		* 近期最早使用算法 : 将近期最少使用的Cache数据替换出去
		* 优化替换算法 : 第一次先执行一次,统计替换方法,第二次替换能更有效的替换
	* 命中率以及平均时间 : 当CPU所访问的数据在Cache使,命中,直接从Cache中读取数据,在Cache则需要从内存中读取, CPU 平均读取一次的时间为 (Cache时间 * 命中率 + 内存时间 * (1 - 命中率))   *实际更具体时间应该还有一次查询Cache*
3. 磁盘的结构和参数
	* 磁盘有正反两个盘面,每个盘面有多个同心圆,每个同心圆是一个磁道,每个同心圆又被划分为多个扇区,数据被存放在一个个扇区中.
	* 磁头首先寻找到对应的磁道, 等待磁盘周期旋转,旋转到指定扇区才能读取到对应的数据, 会产生 #寻道时间和等待时间 存取时间 = 寻道时间 + 等待时间  (平均定位时间+转动延迟)
	* 寻道时间指磁头到磁道所需时间,  等待时间为等待读写的扇区转到磁头下方所需要的时间
	* *先找柱面在找扇面, 所有磁头号是同步移动的*
4. 磁盘调度算法
	*  #先来先服务 FCFS : 根据进程请求访问磁盘的先后顺序进行调度
	*  #最短寻道时间优先 SSTF : 请求访问磁道与当前磁道最近的进程优先调度,使得每次的寻道扫描时间最短,容易出现 "饥饿" 现象,即远处的可能无法访问
	*   #扫描算法 SCAN : 又称 "电梯算法" 选择离磁头当期所在的磁道最近的请求访问的磁道, 永远从里向外或者从外向里,一直到移动完才掉头
	*   #单向扫描调度算法 CSCAN : 只做单向移动,只能从里向外或者从外向里
### 输入输出技术
1. 计算机系统中存在多种内存与接口地址的编制方法
	1. 内存与接口地址独立编址方式
		* 内存地址和接口地址完全独立的两个地址空间. 访问数据时所使用的指令也完全不同. 缺点是用于接口的指令太少,功能太弱.
	2. 内存与接口地址统一编址方法
		* 统一在一个公共的地址空间里,共用地址空间. 优点是内存指令可以全用于接口,缺点是整个地址空间被分为两部分,容易导致内存地址不连续.
2. 计算机和外设的数据交互方式
	1. 程序控制(查询)方式 : CPU 主动查询外设是否完成数据传输, 效率极低
	2. 程序中断 : 外设完成传输后, 向CPU发送中断,效率较高, #中断响应时间 指中断请求到开始处理, #中断处理时间 指中断处理开始到中断结束, #中断向量 提供中断服务程序的入口地址, 多级中断采用堆栈保护断点和现场.
	3. DMA方式 (直接主存存取) : CPU 只需完成必要的初始化操作,数据传输的整个过程由DMA控制器完成,在主存和外设之间建立直接数据通路
		* 在一个总线周期结束后,CPU会响应请求开始读取数据, CPU响应程序中断方式请求是在一条指令执行结束时.
3. 总线
	* 计算机设备和设备之间传输信息的公共数据通道 , *由总线上的所有设备共享*
	* 通常分为三类
		* 内部总线 ; 芯片与处理器之间的总线
		* 系统总线 : 用于计算机内各个部分的连接, 分为 #数据总线 并行传输数据位数, #地址总线 系统可管理的内存空间, #控制总线 传送控制命令
		* 外部总线 ; 设备一级的总线, 微机和外部设备的总线, 如 RS232 (串行总线), SCSI (并行总线), USB

## 操作系统
#### 定义
能有效组织和管理系统中的各个软件/硬件资源, 合理地组织计算机系统工作流程,控制程序的执行,并向用户提供一个良好的工作环境和友好的接口.
操作系统的三个重要作用 :
	1. 管理计算机中运行的程序和分配的各种软硬件资源.
	2. 为用户提供友善的人机界面
	3. 为应用程序的开发和运行提供一个高效的平台.
操作系统的4个特性是 #并发性, #共享性, #虚拟性 , #不确定性 ( #异步性)
* 并发性 : 指同一个时间间隔处理多个任务的能力,
* 共享性 : 可以被多个任务共同使用,分为互斥共享 (独占设备, 同一时间只能允许一个进程访问), 同时共享 (允许过多进程读取, 如磁盘)
* 虚拟性 : 将物理实体转化为逻辑实体 (时分复用技术(单核多线程)和空分复用技术(磁盘分卷))
* 异步性 : 对**不可预测的次序发生的事件**进行响应并处理

1. 操作系统的功能
	1. #进程管理 :  实质上是对处理机的执行 "时间"进行管理,采用多道程序等技术将CPU的时间合理地分配给每个任务, 主要包括 *进程控制*, *进程同步* , *进程通信* 和 *进程调度*
	2.  #文件管理 : 主要包括文件存储空间管理 , 目录管理 , 文件的读/写管理和存取控制
	3.  #存储管理 :  存储管理是对主存储器 "空间"进行管理 , 主要包括存储分配与回收,存储保护,地址映射(变换)和主存的扩充
	4.  #设备管理 : 实质是对硬件设备的管理, 包括对输入/输出设备的分配,启动,完成和回收.
	5.  #作业管理 : 包括任务, 界面管理, 人机交互, 图形界面, 语音控制和虚拟现实等.
2. 操作系统的分类
	* 功能角度分类如下
	1.  #批处理操作系统 : 单道批处理和多道批处理
	2.  #分时操作系统 : 一个计算机系统与多个终端设备连接, 将CPU的工作时间划分成很短的时间片,轮流为各个终端服务.
	3.  #实时操作系统 : 实时指计算机对于外来信息能够快速处理,并在允许时间范围内做出快速反应,要求可靠性有保障.
	4.  #网络操作系统 : 使联网计算机能共享网络资源,为网络用户提供各种服务的软件和有关协议的集合, 分为 *集中模式*, *客户端/服务器模式*, *对等模式*
	5.  #分布式操作系统 :  分布式计算机系统是由多个分散的计算机连接而成的计算机系统, 系统中无主次之分.
	6.  #微型计算机系统 : 简称微机操作系统,如 windows , Mac OS , Linux 等
3. 嵌入式操作系统 (属于运行的环境分类中的一个)
	1. 微型化 : 从性能和成本角度考虑,占用资源少,系统代码量少,内存少,字长短,运行速度有限,能源少.
	2. 可定制 : 从减少成本和缩短研发周期考虑 , 能运行在不同微处理平台上,能针对硬件变化进行结构与功能上的配置,满足不同需求
	3. 实时性 : 用于过程控制,数据采集,传输通信,多媒体信息以及关键要害领域需要迅速响应的场合, 对实时性要求较高.
	4. 可靠性 : 对关键要害应用提供容错和防故障措施.
	5. 易移植性 : 采用硬件抽象层和板级支撑包的底层设计技术
	* 初始化过程是从自底向上,从硬件到软件 : 片级初始化 -> 板级初始化 -> 系统初始化



















